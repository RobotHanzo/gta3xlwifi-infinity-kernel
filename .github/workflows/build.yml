on:
  push:
    branches:
      - master
    tags:
      - "**"
  workflow_dispatch:

name: "Automatic Build System"
jobs:
  build:
    name: "Build Kernel"
    runs-on: ubuntu-latest
    steps:
      - name: "Checkout"
        uses: actions/checkout@v1
      - name: "Install Required APT Packages"
        run: |
          sudo apt-get update && sudo apt-get install git automake flex lzop bison build-essential zip curl zlib1g-dev g++-multilib python-networkx libxml2-utils bzip2 libbz2-dev libbz2-1.0 libghc-bzlib-dev squashfs-tools pngcrush schedtool dpkg-dev liblz4-tool make optipng maven libssl-dev pwgen libswitch-perl policycoreutils minicom libxml-sax-base-perl libxml-simple-perl bc libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev libgl1-mesa-dev xsltproc unzip
      - name: "Install GCC"
        run: |
          git clone https://android.googlesource.com/platform/prebuilts/gcc/linux-x86/aarch64/aarch64-linux-android-4.9
          toolchain 
      - name: "Build Kernel Image"
        run: bash build_kernel.sh
